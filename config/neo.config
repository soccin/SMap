/*
 * -------------------------------------------------
 * Neo config
 * -------------------------------------------------
 * Pipeline parameters specific to running nextflow/nf-core pipelines on new JUNO
 * -------------------------------------------------
 */

executor {
  name = "lsf"
  queueSize = 5000000000
  perJobMemLimit = true
}

process {
  memory = "8.GB"
  time = { task.attempt < 3 ? 3.h * task.attempt  : 500.h }
  clusterOptions = "-R cmorsc1"
  scratch = true
  beforeScript = "module load singularity/3.1.1; unset R_LIBS; catch_term () { echo 'caught USR2/TERM signal'; set +e; false; on_exit ; } ; trap catch_term USR2 TERM"
  maxRetries = 3
  errorStrategy = { task.attempt <= process.maxRetries ? 'retry' : 'ignore' }

  withName: ".*BAM_MARKDUPLICATES:GATK4_MARKDUPLICATES" {
    //cpus=
    memory="64.GB"
    ext.args="--MAX_RECORDS_IN_RAM 10000000"
  }

}

params {

  max_memory = "12.GB"
  mem_per_core = true
  minWallTime = 6.h
  medWallTime = 12.h
  maxWallTime = 500.h
  wallTimeExitCode = '140,0,1,143'

  ngscheckmate_bed = "/juno/bic/work/socci/Work/Users/ElenitK/Wur4/Proj_15673/Sarek/assets/SNP_GRCh37_hg19_woChr.bed"

}

env {
  SPARK_LOCAL_DIRS = './'
}

aws {
    client {
        anonymous = true
    }
}

